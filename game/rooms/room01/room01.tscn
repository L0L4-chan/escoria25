[gd_scene load_steps=11 format=3 uid="uid://dbm8qi5mjr6ei"]

[ext_resource type="Script" path="res://addons/escoria/core-scripts/entities/esc_terrain.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://r15u5b524up7" path="res://game/characters/mark/mark.tscn" id="4"]
[ext_resource type="Script" path="res://addons/escoria/core-scripts/entities/esc_item.gd" id="5"]
[ext_resource type="Script" path="res://addons/escoria/core-scripts/entities/esc_room.gd" id="6"]
[ext_resource type="Script" path="res://addons/escoria/core-scripts/entities/esc_location.gd" id="7"]
[ext_resource type="Texture2D" uid="uid://wyeocnna2i1n" path="res://game/rooms/room01/room1background.png" id="8"]
[ext_resource type="Texture2D" uid="uid://h08vjacwir3a" path="res://game/rooms/room01/art2.png" id="9"]
[ext_resource type="Texture2D" uid="uid://wqvsr8i7t3wj" path="res://game/rooms/room01/art1.png" id="10"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_fk4yc"]
vertices = PackedVector2Array(1166.05, 358.992, 1265.12, 540.898, 24.3984, 534.102, 139.398, 358)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(134, 348, 6, 544, 1282, 551, 1172, 349)])

[sub_resource type="NavigationPolygon" id="1"]
vertices = PackedVector2Array(1267.08, 422.797, 1268.84, 539.977, 22.4766, 538.031, 130.508, 366.977, 1167.32, 365)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4)])
outlines = Array[PackedVector2Array]([PackedVector2Array(125, 357, 1170, 355, 1277, 417, 1279, 550, -1, 548, 5, 547)])

[node name="room1" type="Node2D"]
script = ExtResource("6")
global_id = "room1"
esc_script = "res://game/rooms/room01/esc/room01.esc"
player_scene = ExtResource("4")
camera_limits = Array[Rect2]([Rect2(0, 0, 1280, 550)])
editor_debug_mode = 1

[node name="Room1Background" type="Sprite2D" parent="."]
texture = ExtResource("8")
centered = false

[node name="advice2" type="Label" parent="Room1Background"]
modulate = Color(0, 0, 0, 1)
anchors_preset = -1
anchor_right = 0.023274
anchor_bottom = 0.018018
offset_left = 99.0
offset_top = 11.0
offset_right = 283.209
offset_bottom = 43.7838
text = "Move : left click
Fast move : double left click"

[node name="room_label" type="Label" parent="Room1Background"]
modulate = Color(0, 0, 0, 1)
text = "ROOM 1"

[node name="advice" type="Label" parent="Room1Background"]
modulate = Color(0, 0, 0, 1)
anchors_preset = -1
anchor_right = 0.023274
anchor_bottom = 0.018018
offset_left = 96.0
offset_top = 77.0
offset_right = 360.209
offset_bottom = 135.784
text = "Don't click immediately! 
Player will walk around the room, 
but you can interrupt him if you want."

[node name="walkable_area" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_fk4yc")
script = ExtResource("1")

[node name="NavigationPolygonInstance" type="NavigationRegion2D" parent="walkable_area"]
navigation_polygon = SubResource("1")

[node name="Hotspots" type="Node2D" parent="."]

[node name="r_door" type="Area2D" parent="Hotspots"]
process_mode = 1
script = ExtResource("5")
global_id = "r1_r_exit"
esc_script = "res://game/rooms/room01/esc/right_exit.esc"
is_exit = true
tooltip_name = "Exit to room 2"
default_action = "open"
combine_when_selected_action_is_in = PackedStringArray()
animations = null

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hotspots/r_door"]
polygon = PackedVector2Array(1173, 63, 1278, 106, 1278, 420, 1172, 356)

[node name="ESCLocation" type="Marker2D" parent="Hotspots/r_door"]
position = Vector2(1221, 400)
script = ExtResource("7")

[node name="artwork1" type="Area2D" parent="Hotspots"]
process_mode = 1
script = ExtResource("5")
global_id = "r1_wall_item1"
esc_script = "res://game/rooms/room01/esc/wall_item.esc"
tooltip_name = "Artwork"
default_action = "look"
combine_when_selected_action_is_in = PackedStringArray()
inventory_texture = ExtResource("10")
animations = null

[node name="Art1" type="Sprite2D" parent="Hotspots/artwork1"]
position = Vector2(470, 140)
texture = ExtResource("10")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hotspots/artwork1"]
position = Vector2(-84, 11.1)
polygon = PackedVector2Array(487, 62, 627, 62, 627, 198, 487, 199)

[node name="ESCLocation" type="Marker2D" parent="Hotspots/artwork1"]
position = Vector2(476, 385)
script = ExtResource("7")

[node name="Label" type="Label" parent="Hotspots/artwork1"]
modulate = Color(0, 0, 0, 1)
offset_left = 316.0
offset_top = 221.0
offset_right = 625.0
offset_bottom = 270.0
text = "If you look at this object, the character's
speech will appear above his head"

[node name="artwork2" type="Area2D" parent="Hotspots"]
process_mode = 1
script = ExtResource("5")
global_id = "r1_wall_item2"
esc_script = "res://game/rooms/room01/esc/wall_item_popupdialog.esc"
tooltip_name = "Artwork 2"
default_action = "look"
combine_when_selected_action_is_in = PackedStringArray()
inventory_texture = ExtResource("9")
animations = null

[node name="Art12" type="Sprite2D" parent="Hotspots/artwork2"]
position = Vector2(830, 140)
texture = ExtResource("9")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hotspots/artwork2"]
position = Vector2(273, 11)
polygon = PackedVector2Array(487, 62, 627, 62, 627, 198, 487, 199)

[node name="ESCLocation" type="Marker2D" parent="Hotspots/artwork2"]
position = Vector2(829, 379)
script = ExtResource("7")

[node name="Label2" type="Label" parent="Hotspots/artwork2"]
modulate = Color(0, 0, 0, 1)
offset_left = 730.0
offset_top = 217.0
offset_right = 1028.0
offset_bottom = 266.0
text = "If you look at this object, the character
will talk via a popup"

[node name="trigger_talk" type="Area2D" parent="Hotspots"]
process_mode = 1
script = ExtResource("5")
global_id = "trigger_talk"
esc_script = "res://game/rooms/room01/esc/trigger.esc"
is_trigger = true
player_orients_on_arrival = false
combine_when_selected_action_is_in = PackedStringArray()
animations = null

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hotspots/trigger_talk"]
position = Vector2(55, -1)
polygon = PackedVector2Array(1027, 352, 1187, 502, 1249.67, 445.131, 1123, 351)

[node name="player_start" type="Marker2D" parent="."]
position = Vector2(60, 472)
script = ExtResource("7")
global_id = "r1_start"
is_start_location = true

[node name="orients_down_on_arrival" type="Marker2D" parent="."]
position = Vector2(400.129, 432.969)
script = ExtResource("7")
global_id = "r1_destination_point"

[node name="set_angle_by_esc" type="Marker2D" parent="."]
position = Vector2(934.11, 502.959)
script = ExtResource("7")
global_id = "r1_destination_point2"
player_orients_on_arrival = false

[node name="turn_to_r_door_by_esc" type="Marker2D" parent="."]
position = Vector2(660.468, 381.489)
script = ExtResource("7")
global_id = "r1_destination_point3"
player_orients_on_arrival = false
